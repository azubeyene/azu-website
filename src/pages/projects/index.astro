---
const currentPath = Astro.url.pathname;
import '../../styles/global.css';

// Get all project markdown files
const projects = await Astro.glob('../projects/*.md');

// Sort by date (newest first)  
const sortedProjects = projects.sort((a, b) => {
  const dateA = new Date(a.frontmatter.date);
  const dateB = new Date(b.frontmatter.date);
  return dateB.getTime() - dateA.getTime();
});
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/growing_plant_favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <title>Blog - Azariah Beyene</title>
  </head>
  <body class="bg-white text-green-950 font-sans">
    <!-- Navbar -->
    <header class="max-w-3xl mx-auto px-6 py-16">
      <nav class="flex justify-between items-center">
        <a href="/" class="text-2xl font-semibold text-green-950 hover:text-green-600 transition-colors">
          Azariah Beyene
        </a>
        <div class="flex space-x-8">
          <a href="/projects" class="text-green-600 hover:text-green-950 transition-colors text-lg">projects</a>
          <a href="/blog" class={`text-green-600 hover:text-green-950 transition-colors text-lg relative ${currentPath.startsWith('/blog') ? 'after:content-[""] after:absolute after:bottom-[-4px] after:left-0 after:right-0 after:h-0.5 after:bg-green-600' : ''}`}>blog</a>
          <a href="/resume.pdf" target="_blank" class="text-green-600 hover:text-green-950 transition-colors text-lg">resume</a>
        </div>
      </nav>
    </header>

    <!-- Projects List -->
    <main class="max-w-3xl mx-auto px-6 pb-16">
        <div class="space-y-10">
            {sortedProjects.map((project) => (
              <div class="project flex items-start space-x-6">
                <div class="flex-shrink-0">
                  <img 
                    src={project.frontmatter.image || '/images/default-project.jpg'} 
                    alt={project.frontmatter.title}
                    class="w-24 h-24 rounded object-cover shadow-sm"
                  />
                </div>
                
                <div class="flex-1">
                  <div class="flex items-baseline space-x-3 mb-2">
                    <a 
                      href={project.url} 
                      class="font-medium text-green-950 hover:text-green-600 transition-colors text-lg"
                    >
                      {project.frontmatter.title}
                    </a>
                    <span class="text-base text-green-600">{project.frontmatter.date}</span>
                  </div>
                  <p class="text-green-950 leading-relaxed">
                    {project.frontmatter.description}
                  </p>
                </div>
              </div>
            ))}
        </div>
    </main>
  </body>

  <footer class="max-w-3xl mx-auto px-6 py-8 text-center space-y-4">
	<div class="flex justify-center space-x-6">
		<a href="mailto:azubeyene@gmail.com" class="text-green-600 hover:text-green-950 transition-colors">Email</a>
		<a href="https://github.com/azubeyene" target="_blank" class="text-green-600 hover:text-green-950 transition-colors">GitHub</a>
		<a href="https://www.linkedin.com/in/azariah-beyene-729573168/" target="_blank" class="text-green-600 hover:text-green-950 transition-colors">LinkedIn</a>
	</div>
	<p class="text-green-600 text-sm">
	  Site design lovingly borrowed from the GOAT 
	  <a href="https://www.ekzhang.com/" target="_blank" class="hover:text-green-950 transition-colors underline">
		Eric Zhang
	  </a>
	</p>
  </footer>
</html>